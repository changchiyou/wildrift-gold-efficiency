# Establish Gold Efficiency Page for the New Version (for maintainer)

Taking the update from [5.1a](https://changchiyou.github.io/wildrift-gold-efficiency/5.1a/) to [5.1b](https://changchiyou.github.io/wildrift-gold-efficiency/5.1b/) as an example:

1. Copy [items_5_1a.yml](/_data/items_5_1a.yml) & [stats_5_1a.yml](/_data/stats_5_1a.yml) and rename to [items_5_1b.yml](/_data/items_5_1b.yml) & [stats_5_1b.yml](/_data/stats_5_1b.yml):
2. Manually update item data in [items_5_1b.yml](/_data/items_5_1b.yml) based on [WILD RIFT PATCH NOTES 5.1B - ITEMS](https://wildrift.leagueoflegends.com/en-us/news/game-updates/wild-rift-patch-notes-5-1b/#items):

    The field info of `items_[version].yml`:

    | Field | Requirement | Description |
    |-|-|-|
    |`amount`|no need|Generated by [data.py](/data.py)|
    |`category`|required|Determines where the item belongs to. For instance, set `category` as `PHYSICAL DAMAGE ITEMS` to make the item belong to [ðŸ“Œ Physical Damage Items](https://changchiyou.github.io/wildrift-gold-efficiency/5.1b/#PHYSICAL-DAMAGE-ITEMS).|
    |`cost`|required|The cost of the item.|
    |`formula`|no need|Generated by [data.py](/data.py)|
    |`image`|required|The image reference of the item.|
    |`name`|required|The name of the item. The notes in `()` would be extracted and rendered with different style (only allowed 1 `()` set exists).|
    |`stats`|required|The stats info of the item. Check more detail info in following sheet.|

    The fields info of `stats` field:

    | Field | Requirement | Description |
    |-|-|-|
    |`formula`|no need|Generated by [data.py](/data.py)|
    |`passive`|optional|The unique passive which give the item the stat.|
    |`ratio`|optional|The stat ratio which is calculated with `ref` ( and `ref_type`) to generate `value`|
    |`ref`|optional|The target base stat for `value`'s calculation|
    |`ref_type`|optional|The target stat from the item for `value`'s calculation|
    |`type`|required|The type of the stat|
    |`value`|required|The value of the stat|
    |`value`*|no need|Generated by [data.py](/data.py) (only if `ratio`&`ref` are set)*|

    Some example:

    1. Basic:
        https://github.com/changchiyou/wildrift-gold-efficiency/blob/aff35e946e6855a12d898505d38e846fad24df14/_data/items_5_1b.yml#L15-L34

    2. `ratio` & `ref`:
        https://github.com/changchiyou/wildrift-gold-efficiency/blob/aff35e946e6855a12d898505d38e846fad24df14/_data/items_5_1b.yml#L819-L836

    3. `ref_type`:
        https://github.com/changchiyou/wildrift-gold-efficiency/blob/aff35e946e6855a12d898505d38e846fad24df14/_data/items_5_1b.yml#L367-L386

3. Manually update [stats_5_1b.yml](/_data/stats_5_1b.yml):

    The fields info of `stats_[version].yml`:

    | Field | Requirement | Description |
    |-|-|-|
    | `image`     | required    | The reference of the image.|
    | `base_type` | optional    | Determines where the statistic price belongs in [ðŸ’° Base Statistic Prices](https://changchiyou.github.io/wildrift-gold-efficiency/5.1b/#Base-Statistic-Prices). Set `first` for *First-tier Base Item* and set `second` for *Second-tier Base Item*. |
    | `base_item` | optional    | The item used as the basis for calculating the statistic price.|
    | `type`      | required    | Determines the classification of the stat in the [ðŸ”Ž Stat Filters](https://changchiyou.github.io/wildrift-gold-efficiency/5.1b/#stat-filters). Set `""` to exclude from filters.|

    Some examples:

    1. Basic:
        https://github.com/changchiyou/wildrift-gold-efficiency/blob/aff35e946e6855a12d898505d38e846fad24df14/_data/stats_5_1b.yml#L41-L45

    2. Excluded from statistic price calculation:
        https://github.com/changchiyou/wildrift-gold-efficiency/blob/aff35e946e6855a12d898505d38e846fad24df14/_data/stats_5_1b.yml#L61-L63

    3. Exclude from statistic price calculation and filters:
        https://github.com/changchiyou/wildrift-gold-efficiency/blob/aff35e946e6855a12d898505d38e846fad24df14/_data/stats_5_1b.yml#L88-L90

4. Install python dependencies:

    ```
    pip install -r requirements.txt
    ```

5. Execute [data.py](/data.py) to re-generate `amount` and `formula` in [items_5_1b.yml](/_data/items_5_1b.yml) based on step `2.`( Manually update item data in [items_5_1b.yml](/_data/items_5_1b.yml) ):
    - Specific `5.1b`:
        ```
        python data.py -c --items items_5_1b.yml --stats stats_5_1b.yml
        ```

    - All yml files in `_data` directory:
        ```
        python data.py -c
        ```

    > For more info of params, execute:
    > ```
    > python data.py -h
    > ```

6. Create [5_1b.md](/_pages/5_1b.md) based on [5_1a.md](/_pages/5_1a.md) & [5_1.md](/_pages/5_1.md):

    The params info of page.md:

    | Field | Requirement | Description |
    |-|-|-|
    |`layout`|fixed value|Set `gold_efficiency` means the page is using the layout of [gold_efficiency.html](/_layouts/gold_efficiency.html).|
    |`title`|required|The title of the page, normally named with version name.|
    |`date`|required|The publish date of the page. Required for generating rss with [feed.xml](/feed.xml). (`2024/04/19 12:02 a.m.` or simply `2024/04/19` are both valid value)|
    |`description`|required|Briefly describe the page.|
    |`image`|fixed value|`/assets/favicon512x512.png`|
    |`permalink`|required|Specific the sub-path for this page.|
    |`redirect_from`|optional|Set to `/` to redirect the root path to this page.|
    |`data`|required|Fields for item data.|
    |`data.refer_url`|required|The URL of wildrift badge.|
    |`data.refer_text`|required|The TEXT of wildrift badge.|
    |`data.items`|required|The item datas.|
    |`data.stats`|required|The base stats info.|
    |`patch_note`|optional|Fields for comparing last version. (icon, row)|
    |`patch_note.statuses`|required|A string combining item names separated by commas(`,`) with uppercase. The item names in string would be listed with following patch-note statuses.|
    |`patch_note.statuses.buffed`|optional|Items that have been buffed.|
    |`patch_note.statuses.adjusted`|optional|Items that have been adjusted.|
    |`patch_note.statuses.nerfed`|optional|Items that have been nerfed.|
    |`patch_note.statuses.new`|optional|Items that have been added.|
    |`patch_note.excludes`|optional|The specific item name to be excluded from listing patch-note statuses.|
    |`patch_note.compare`|optional|Fields for comparing last version. (generate a row of item data from last version)|
    |`patch_note.compare.statuses`|fixed value|The patch-note statuses would find the item data from last version to compare with.|
    |`patch_note.compare.items`|optional|The item datas to compare with.|
    |`patch_note.compare.stats`|optional|The stats to compare with.|
    |`patch_note.compare.item_prefix`|optional|The prefix which would be render in frount of the row of comparing item data.|

    For example:

    1. `5.1`:
        https://github.com/changchiyou/wildrift-gold-efficiency/blob/5da421add09e83f77b87df5eca303b6dce503265/_pages/5_1.md?plain=1#L1-L16
    2. `5.1a`:
        https://github.com/changchiyou/wildrift-gold-efficiency/blob/5da421add09e83f77b87df5eca303b6dce503265/_pages/5_1a.md?plain=1#L1-L28
    3. `5.1b`:
        https://github.com/changchiyou/wildrift-gold-efficiency/blob/5da421add09e83f77b87df5eca303b6dce503265/_pages/5_1b.md?plain=1#L1-L28